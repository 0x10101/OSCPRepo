<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Locating the Policy File</title>
</head><body><b>How RemoteServiceServlet locates the serialization policy file</b><br/>
RemoteServiceServlet assumes that serialization policies are stored as <a href="http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getResource(java.lang.String)">servlet resources</a>.<br/>
(Servlet resources aren't the same as Java resources; they're defined as part of J2EE, not the JDK. Servlet resources are typically provided as part of a war file.)<br/>
<br/>
For this to work, the servlet must be running in a web app that also serves the static files that make up the GWT application. Therefore, it can use the GWT app's base URL (sent in the request) and servlet container methods to locate files generated by the GWT compiler.<br/>
<br/>
Example: suppose a web page loads a GWT app using this script tag:<br/>
<br/>
&nbsp;&lt;script src="http://example.com/contextPath/something/SomeModule.nocache.js"&gt;<br/>
&nbsp;&lt;/script&gt;<br/>
<br/>
At startup, the GWT app finds its own script tag and calculates that its base URL is:<br/>
&nbsp;http://example.com/contextPath/something/<br/>
<br/>
Then suppose it makes a GWT-RPC request to a servlet at:<br/>
<br/>
&nbsp;http://example.com/contextPath/somethingElse/myServlet<br/>
<br/>
The servlet calls request.getContextPath() and this returns "http://example.com/contextPath". It removes this prefix from the base URL (sent in the RPC call) to get "/something/". To this it adds the strong name and a standard file extension to get:<br/>
<br/>
&nbsp; &nbsp;servlet.getServletContext().getResourceAsStream("/something/&lt;strong name&gt;.gwt.rpc");<br/>
<br/>
If any of the above assumptions aren't true, the developer will have to override RemoteServiceServlet.doGetSerializationPolicy() to provide an alternate way to load the policy file.<br/>
</body></html>