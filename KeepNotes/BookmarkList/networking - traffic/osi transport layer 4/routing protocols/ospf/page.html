<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>OSPF</title>
</head><body>https://en.wikipedia.org/wiki/Open_Shortest_Path_First<br/>
<br/>
Routers send mutlicast "hello" packets (forming neighbor relationships)<br/>
Neighbors share topoligy with Link State Advertisements (LSAs), which are flooded to upstream neighbords<br/>
Routers build a topology database for routing traffic (topology changes causes LSAs flooding)<br/>
OSPF areas used to limit LSAs within a defined group (backbone area "0.0.0.0" or just "0")<br/>
<br/>
<b>Open Shortest Path First</b>&nbsp;(<b>OSPF</b>) is a <a href="https://en.wikipedia.org/wiki/Routing_protocol">routing protocol</a>&nbsp;for <a href="https://en.wikipedia.org/wiki/Internet_Protocol">Internet Protocol</a>&nbsp;(IP) networks. It uses a <a href="https://en.wikipedia.org/wiki/Link-state_routing_protocol">link state routing</a>&nbsp;(LSR) algorithm and falls into the group of <a href="https://en.wikipedia.org/wiki/Interior_gateway_protocol">interior gateway protocols</a>&nbsp;(IGPs), operating within a single <a href="https://en.wikipedia.org/wiki/Autonomous_system_(Internet)">autonomous system</a>&nbsp;(AS). It is defined as OSPF Version 2 in <a href="https://tools.ietf.org/html/rfc2328">RFC 2328</a>&nbsp;(1998) for <a href="https://en.wikipedia.org/wiki/IPv4">IPv4</a>.<a href="https://en.wikipedia.org/wiki/Open_Shortest_Path_First#cite_note-rfc2328-1">[1]</a>&nbsp;The updates for <a href="https://en.wikipedia.org/wiki/IPv6">IPv6</a>&nbsp;are specified as OSPF Version 3 in <a href="https://tools.ietf.org/html/rfc5340">RFC 5340</a>&nbsp;(2008).<a href="https://en.wikipedia.org/wiki/Open_Shortest_Path_First#cite_note-rfc5340-2">[2]</a>&nbsp;OSPF supports the <a href="https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing">Classless Inter-Domain Routing</a>&nbsp;(CIDR) addressing model. <br/>
<br/>
OSPF is a widely used IGP in large <a href="https://en.wikipedia.org/wiki/Enterprise_network">enterprise networks</a>. <a href="https://en.wikipedia.org/wiki/IS-IS">IS-IS</a>, another LSR-based protocol, is more common in large <a href="https://en.wikipedia.org/wiki/Network_service_provider">service provider</a>&nbsp;networks. <br/>
&nbsp; <br/>
<b>OSPF v3</b><br/>
OSPF version 3 introduces modifications to the IPv4 implementation of the protocol.<a href="https://en.wikipedia.org/wiki/Open_Shortest_Path_First#cite_note-rfc5340-2">[2]</a>&nbsp;Except for virtual links, all neighbor exchanges use IPv6 link-local addressing exclusively. The IPv6 protocol runs per link, rather than based on the <a href="https://en.wikipedia.org/wiki/Subnetwork">subnet</a>. All IP prefix information has been removed from the link-state advertisements and from the <i>hello</i>&nbsp;discovery packet making OSPFv3 essentially protocol-independent. Despite the expanded IP addressing to 128-bits in IPv6, area and router identifications are still based on 32-bit numbers. &nbsp; <br/>
<b><br/>
</b><b>Operation</b><br/>
Open Shortest Path First (OSPF) was designed as an <a href="https://en.wikipedia.org/wiki/Interior_gateway_protocol">interior gateway protocol</a>&nbsp;(IGP), for use in an <a href="https://en.wikipedia.org/wiki/Autonomous_system_(Internet)">autonomous system</a>&nbsp;such as a <a href="https://en.wikipedia.org/wiki/Local_area_network">local area network</a>&nbsp;(LAN). It implements <a href="https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm">Dijkstra's algorithm</a>, also known as the shortest path first (SPF) algorithm. As a <a href="https://en.wikipedia.org/wiki/Link-state_routing_protocol">link-state routing protocol</a>&nbsp;it was based on the link-state algorithm developed for the <a href="https://en.wikipedia.org/wiki/ARPANET">ARPANET</a>&nbsp;in 1980 and the <a href="https://en.wikipedia.org/wiki/IS-IS">IS-IS</a>&nbsp;routing protocol. OSPF was first standardised in 1989 as <a href="https://tools.ietf.org/html/rfc1131">RFC 1131</a>, which is now known as OSPF version 1. The development work for OSPF prior to its codification as open standard was undertaken largely by the <a href="https://en.wikipedia.org/wiki/Digital_Equipment_Corporation">Digital Equipment Corporation</a>, which developed its own proprietary <a href="https://en.wikipedia.org/wiki/DECnet">DECnet</a>&nbsp;protocols.<a href="https://en.wikipedia.org/wiki/Open_Shortest_Path_First#cite_note-3">[3]</a>&nbsp;<br/>
<br/>
Routing protocols like OSPF calculate the <i>shortest</i>&nbsp;route to a destination through the network based on an algorithm. The first routing protocol that was widely implemented, the <a href="https://en.wikipedia.org/wiki/Routing_Information_Protocol">Routing Information Protocol</a>&nbsp;(RIP), calculated the shortest route based on hops, that is the number of <a href="https://en.wikipedia.org/wiki/Router_(computing)">routers</a>&nbsp;that an <a href="https://en.wikipedia.org/wiki/IP_packet_(disambiguation)">IP packet</a>&nbsp;had to traverse to reach the destination host. RIP successfully implemented <a href="https://en.wikipedia.org/wiki/Dynamic_routing">dynamic routing</a>, where routing tables change if the <a href="https://en.wikipedia.org/wiki/Network_topology">network topology</a>&nbsp;changes. But RIP did not adapt its routing according to changing network conditions, such as <a href="https://en.wikipedia.org/wiki/Data-rate_units">data-transfer rate</a>. Demand grew for a dynamic routing protocol that could calculate the <i>fastest</i>&nbsp;route to a destination. OSPF was developed so that the shortest path through a network was calculated based on the <i>cost</i>&nbsp;of the route, taking into account <a href="https://en.wikipedia.org/wiki/Bandwidth_(computing)">bandwidth</a>, delay and load.<a href="https://en.wikipedia.org/wiki/Open_Shortest_Path_First#cite_note-4">[4]</a>&nbsp;Therefore OSPF undertakes route cost calculation on the basis of link-cost parameters, which can be weighted by the administrator. OSPF was quickly adopted because it became known for reliably calculating routes through large and complex local area networks.<a href="https://en.wikipedia.org/wiki/Open_Shortest_Path_First#cite_note-5">[5]</a>&nbsp;<br/>
<br/>
As a link state routing protocol, OSPF maintains link state databases, which are really network topology maps, on every router on which it is implemented. The <i>state</i>&nbsp;of a given route in the network is the cost, and OSPF algorithm allows every router to calculate the cost of the routes to any given reachable destination.<a href="https://en.wikipedia.org/wiki/Open_Shortest_Path_First#cite_note-6">[6]</a>&nbsp;Unless the administrator has made a configuration, the link cost of a path connected to a router is determined by the <a href="https://en.wikipedia.org/wiki/Bit_rate">bit rate</a>&nbsp;(1 Gbit/s, 10 Gbit/s, etc) of the interface. A router interface with OSPF will then advertise its link cost to neighbouring routers through multicast, known as the <i>hello procedure</i>.<a href="https://en.wikipedia.org/wiki/Open_Shortest_Path_First#cite_note-7">[7]</a>&nbsp;All routers with OSPF implementation keep sending hello packets, and thus changes in the cost of their links become known to neighbouring routers.<a href="https://en.wikipedia.org/wiki/Open_Shortest_Path_First#cite_note-8">[8]</a>&nbsp;The information about the cost of a link, that is the speed of a point to point connection between two routers, is then cascaded through the network because OSPF routers advertise the information they receive from one neighbouring router to all other neighbouring routers. This process of flooding link state information through the network is known as <i>synchronisation</i>. Based on this information, all routers with OSPF implementation continuously update their link state databases with information about the network topology and adjust their routing tables.<a href="https://en.wikipedia.org/wiki/Open_Shortest_Path_First#cite_note-9">[9]</a>&nbsp;<br/>
<br/>
An OSPF network can be structured, or subdivided, into routing <i>areas</i>&nbsp;to simplify administration and optimize traffic and resource utilization. Areas are identified by 32-bit numbers, expressed either simply in decimal, or often in the same <a href="https://en.wikipedia.org/wiki/Dot-decimal_notation">dot-decimal notation</a>&nbsp;used for IPv4 addresses. By convention, area 0 (zero), or 0.0.0.0, represents the core or <i>backbone</i>&nbsp;area of an OSPF network. While the identifications of other areas may be chosen at will; administrators often select the IP address of a main router in an area as the area identifier. Each additional area must have a connection to the OSPF backbone area. Such connections are maintained by an interconnecting router, known as an area border router (ABR). An ABR maintains separate link-state databases for each area it serves and maintains <a href="https://en.wikipedia.org/wiki/Route_summarization">summarized routes</a>&nbsp;for all areas in the network. <br/>
<br/>
OSPF detects changes in the topology, such as link failures, and <a href="https://en.wikipedia.org/wiki/Convergence_(routing)">converges</a>&nbsp;on a new loop-free routing structure within seconds.<a href="https://en.wikipedia.org/wiki/Open_Shortest_Path_First#cite_note-10">[10]</a>&nbsp;<br/>
<br/>
OSPF has become a popular dynamic routing protocol. Other commonly used dynamic routing protocols are the RIP and the <a href="https://en.wikipedia.org/wiki/Border_Gateway_Protocol">Border Gateway Protocol</a>&nbsp;(BGP). <a href="https://en.wikipedia.org/wiki/Open_Shortest_Path_First#cite_note-11">[11]</a>&nbsp;Today <a href="https://en.wikipedia.org/wiki/Router_(computing)">routers</a>&nbsp;support at least one interior gateway protocol to advertise their <a href="https://en.wikipedia.org/wiki/Routing_tables">routing tables</a>&nbsp;within a local area network. Frequently implemented interior gateway protocols besides OSPF are RIP, IS-IS, and the proprietary <a href="https://en.wikipedia.org/wiki/Interior_Gateway_Routing_Protocol">Interior Gateway Routing Protocol</a>&nbsp;(IGRP) by Cisco. <a href="https://en.wikipedia.org/wiki/Open_Shortest_Path_First#cite_note-12">[12]</a>&nbsp;<br/>
<br/>
<b>Router relationships</b><br/>
OSPF supports complex networks with multiple routers, including backup routers, to balance traffic load on multiple links to other subnets. Neighboring routers in the same <a href="https://en.wikipedia.org/wiki/Broadcast_domain">broadcast domain</a>&nbsp;or at each end of a <a href="https://en.wikipedia.org/wiki/Point-to-point_communication_(telecommunications)">point-to-point link</a>&nbsp;communicate with each other via the OSPF protocol. Routers form <i>adjacencies</i>&nbsp;when they have detected each other. This detection is initiated when a router identifies itself in a <i>Hello</i>&nbsp;protocol packet. Upon acknowledgment, this establishes a <i>two-way state</i>&nbsp;and the most basic relationship. The routers in an Ethernet or Frame Relay network select a <i>Designated Router</i>&nbsp;(DR) and a <i>Backup Designated Router</i>&nbsp;(BDR) which act as a hub to reduce traffic between routers. OSPF uses both <a href="https://en.wikipedia.org/wiki/Unicast">unicast</a>&nbsp;and multicast transmission modes to send "Hello" packets and link state updates. <br/>
<br/>
As a link state routing protocol, OSPF establishes and maintains neighbor relationships for exchanging routing updates with other routers. The neighbor relationship table is called an <i>adjacency database</i>. Two OSPF routers are neighbors if they are members of the same subnet and share the same area ID, subnet mask, timers and authentication. In essence, OSPF neighborship is a relationship between two routers that allow them to see and understand each other but nothing more. OSPF neighbors do not exchange any routing information – the only packets they exchange are Hello packets. OSPF adjacencies are formed between selected neighbors and allow them to exchange routing information. Two routers must first be neighbors and only then, can they become adjacent. Two routers become adjacent if at least one of them is Designated Router or Backup Designated Router (on multiaccess type networks), or they are interconnected by a point-to-point or point-to-multipoint network type. For forming a neighbor relationship between, the interfaces used to form the relationship must be in the same OSPF area. While an interface may be configured to belong to multiple areas, this is generally not practiced. When configured in a second area, an interface must be configured as a secondary interface. <br/>
&nbsp; <br/>
<b>Adjacency state machine</b><br/>
Each OSPF router within a network communicates with other neighboring routers on each connecting interface to establish the states of all adjacencies. Every such communication sequence is a separate <i>conversation</i>&nbsp;identified by the pair of router IDs of the communicating neighbors. <a href="https://tools.ietf.org/html/rfc2328">RFC 2328</a>&nbsp;specifies the protocol for initiating these conversations (<i>Hello Protocol</i>) and for establishing full adjacencies (<i>Database Description Packets</i>, <i>Link State Request Packets</i>). During its course, each router conversation transitions through a maximum of eight conditions defined by a state machine:<a href="https://en.wikipedia.org/wiki/Open_Shortest_Path_First#cite_note-rfc2328-1">[1]</a><a href="https://en.wikipedia.org/wiki/Open_Shortest_Path_First#cite_note-13">[13]</a>&nbsp;<br/>
&nbsp;<ul><li>Down: The state <i>down</i>&nbsp;represents the initial state of a conversation when no information has been exchanged and retained between routers with the Hello Protocol.</li>
<li>Attempt: The <i>Attempt</i>&nbsp;state is similar to the <i>Down</i>&nbsp;state, except that a router is in the process of efforts to establish a conversation with another router, but is only used on <a href="https://en.wikipedia.org/wiki/Non-broadcast_multiple-access_network">NBMA</a>&nbsp;networks.</li>
<li>Init: The <i>Init</i>&nbsp;state indicates that a HELLO packet has been received from a neighbor, but the router has not established a two-way conversation.</li>
<li>2-Way: The <i>2-Way</i>&nbsp;state indicates the establishment of a bidirectional conversation between two routers. This state immediately precedes the establishment of adjacency. This is the lowest state of a router that may be considered as a Designated Router.</li>
<li>ExStart: The <i>ExStart</i>&nbsp;state is the first step of adjacency of two routers.</li>
<li>Exchange: In the <i>Exchange</i>&nbsp;state, a router is sending its link state database information to the adjacent neighbor. At this state, a router is able to exchange all OSPF routing protocol packets.</li>
<li>Loading: In the <i>Loading</i>&nbsp;state, a router requests the most recent <a href="https://en.wikipedia.org/wiki/Link-state_advertisement">Link-state advertisements</a>&nbsp;(LSAs) from its neighbor discovered in the previous state.</li>
<li>Full: The <i>Full</i>&nbsp;state concludes the conversation when the routers are fully adjacent, and the state appears in all router- and network-LSAs. The link state databases of the neighbors are fully synchronized.</li>
</ul>
&nbsp;<br/>
<b>OSPF messages</b><br/>
Unlike other routing protocols, OSPF does not carry data via a transport protocol, such as the <a href="https://en.wikipedia.org/wiki/User_Datagram_Protocol">User Datagram Protocol</a>&nbsp;(UDP) or the <a href="https://en.wikipedia.org/wiki/Transmission_Control_Protocol">Transmission Control Protocol</a>&nbsp;(TCP). Instead, OSPF forms IP datagrams directly, packaging them using protocol number 89 for the <a href="https://en.wikipedia.org/wiki/List_of_IP_protocol_numbers">IP Protocol field</a>. OSPF defines five different message types, for various types of communication: <br/>
&nbsp;<ul><li>Hello </li>
<li style="list-style-type: none"><ul><li><i>Hello</i>&nbsp;messages are used as a form of greeting, to allow a router to discover other adjacent routers on its local links and networks. The messages establish relationships between neighboring devices (called adjacencies) and communicate key parameters about how OSPF is to be used in the autonomous system or area. During normal operation, routers send hello messages to their neighbors at regular intervals (the <i>hello interval</i>); if a router stops receiving hello messages from a neighbor, after a set period (the <i>dead interval</i>) the router will assume the neighbor has gone down. </li>
</ul>
</li>
<li>Database Description (<i>DBD</i>) </li>
<li style="list-style-type: none"><ul><li><i>Database description</i>&nbsp;messages contain descriptions of the topology of the autonomous system or area. They convey the contents of the link-state database (LSDB) for the area from one router to another. Communicating a large LSDB may require several messages to be sent by having the sending device designated as a master device and sending messages in sequence, with the slave (recipient of the LSDB information) responding with acknowledgements. </li>
</ul>
</li>
<li>Link State Request (<i>LSR</i>) </li>
<li style="list-style-type: none"><ul><li><i>Link state request</i>&nbsp;messages are used by one router to request updated information about a portion of the LSDB from another router. The message specifies the link(s) for which the requesting device wants more current information. </li>
</ul>
</li>
<li>Link State Update (<i>LSU</i>) </li>
<li style="list-style-type: none"><ul><li><i>Link state update</i>&nbsp;messages contain updated information about the state of certain links on the LSDB. They are sent in response to a Link State Request message, and also broadcast or multicast by routers on a regular basis. Their contents are used to update the information in the LSDBs of routers that receive them. </li>
</ul>
</li>
<li>Link State Acknowledgment (<i>LSAck</i>) </li>
<li style="list-style-type: none"><ul><li><i>Link state acknowledgement</i>&nbsp;messages provide reliability to the link-state exchange process, by explicitly acknowledging receipt of a Link State Update message. &nbsp;</li>
</ul>
</li>
</ul>
<br/>
<br/>
</body></html>