<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Enumerating Users Without Preauth</title>
</head><body>If you’re already an authenticated (but otherwise unprivileged) user, you can easily enumerate what users in the domain have this setting with the LDAP filter <b>(userAccountControl:1.2.840.113556.1.4.803:=4194304)</b>. <a href="http://web.archive.org/web/20190223142423/https://github.com/PowerShellMafia/PowerSploit/blob/445f7b2510c4553dcd9451bc4daccb20c8e67cbb/Recon/PowerView.ps1">PowerView</a>‘s <b>Get-DomainUser</b>&nbsp;already has this implemented with the <b><a href="http://web.archive.org/web/20190223142423/https://github.com/PowerShellMafia/PowerSploit/blob/445f7b2510c4553dcd9451bc4daccb20c8e67cbb/Recon/PowerView.ps1#L4767-L4770">-PreauthNotRequired</a></b><a href="http://web.archive.org/web/20190223142423/https://github.com/PowerShellMafia/PowerSploit/blob/445f7b2510c4553dcd9451bc4daccb20c8e67cbb/Recon/PowerView.ps1#L4767-L4770">&nbsp;</a>parameter: &nbsp;<br/>
<br/>
PS&gt; Get-DomainUser -PreauthNotRequired -Properties distinguishedname -Verbose<br/>
<img src="image.png" /><br/>
<br/>
</body></html>